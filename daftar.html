<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!--============= ICON - REMIXICON ===========-->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet" />

  <!--============= SLIDER - SWIPER.JS ===========-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">

  <!--============= CSS - CSS GLOBAL ===========-->
  <link rel="stylesheet" href="styles.css" />
  <title>E-Commerce | oleholehNTT</title>
</head>

<body>

  <span id="redirectLogin" data-when="signin" data-to="/"></span>

  <!--======================================================= DAFTAR - HOMEPAGE =======================================================-->
  <section class="section__container daftar_container">
    <div class="logo_daftar_container">
      <img src="assets/logo_oleh_oleh_ntt3_2.png" />
    </div>
    <div class="perintah_daftar">
      <h3>
        Masukkan email Anda untuk masuk atau mendaftar
      </h3>
      <p>
        Kami telah mengirimkan kode ke <span id="new-email-placeholder"></span>
      </p>
      <a href="masuk_atau_daftar.html">
        Edit Email
      </a>
    </div>
    <form id="daftar" class="input_daftar_container">
      <div class="">
        <div class="input_grup">
          <input type="text" name="kode" required />
          <label for="kode">Kode*</label>
        </div>
      </div>
      <div class="">
        <div class="input_grup">
          <input type="text" id="nama" name="nama" required />
          <label for="nama">Nama*</label>
        </div>
      </div>
      <div class="">
        <div class="input_grup">
          <input type="password" required />
          <label for="">Password*</label>
        </div>
      </div>
      <div class="">
        <div class="input_grup">
          <input type="password" required />
          <label for="">Konfirmasi Password*</label>
        </div>
      </div>
      <div class="">
        <div class="input_grup">
          <input type="text" id="noHP" name="noHP" required />
          <label for="noHP">No HP*</label>
        </div>
      </div>
      <div class="">
        <label>Tanggal Lahir</label>
        <div class="input_grup">
          <input type="date" id="tanggalLahir" name="tanggalLahir" required />
          <label for="tanggalLahir"></label>
        </div>
      </div>

      <div class="">
        <div class="input_grup">
          <input id="jalan" type="text" name="jalan" required />
          <label for="jalan">Jalan</label>
        </div>
      </div>

      <div class="bagi_bagi">
        <div class="input_grup">
          <input type="number" id="rt" name="rt" required />
          <label for="rt">RT*</label>
        </div>

        <div class="input_grup">
          <input type="number" id="rw" name="rw" required />
          <label for="rw">RW*</label>
        </div>
      </div>

      <div class="bagi_bagi">
        <div class="input_grup">
          <input type="text" id="kelurahanDesa" name="kelurahanDesa" required />
          <label for="kelurahanDesa">Kelurahan/Desa*</label>
        </div>

        <div class="input_grup">
          <input type="text" id="kecamatan" name="kecamatan" required />
          <label for="kecamatan">Kecamatan*</label>
        </div>
      </div>

      <div class="bagi_bagi">
        <div class="input_grup">
          <input type="text" id="kotaKabupaten" name="kotaKabupaten" required />
          <label for="kotaKabupaten">Kota/Kabupaten*</label>
        </div>

        <div class="input_grup">
          <input type="text" id="provinsi" name="provinsi" required />
          <label for="provinsi">Provinsi*</label>
        </div>
      </div>

      <div class="input-check">
        <input type="checkbox" id="agree" required />
        <label for="agree">Saya setuju dengan Syarat dan Ketentuan yang berlaku</label>
      </div>

      <div class="input-check">
        <input type="checkbox" id="privacy" required />
        <label for="privacy">Saya setuju dengan Kebijakan Privasi</label>
      </div>

      <div class="row tombol_daftar">
        <button type="submit" class="btn_small">
          Daftar Akun
        </button>
      </div>

    </form>
  </section>
  <!--======================================================= AKHIR DAFTAR - HOMEPAGE =======================================================-->

  <script src="https://unpkg.com/scrollreveal"></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script src="/js/main.js"></script>
  <script src="/js/auth.js"></script>
  <script type="text/javascript">
    const getAlamatFromInput = () => {
      const inputJalan = document.getElementById('jalan');
      const inputRT = document.getElementById('rt');
      const inputRW = document.getElementById('rw');
      const inputKelurahanDesa = document.getElementById('kelurahanDesa');
      const inputKecamatan = document.getElementById('kecamatan');
      const inputKotaKabupaten = document.getElementById('kotaKabupaten');
      const inputProvinsi = document.getElementById('provinsi');

      return new Alamat(
        inputRT.value,
        inputRW.value,
        inputJalan.value,
        inputKelurahanDesa.value,
        inputKecamatan.value,
        inputKotaKabupaten.value,
        inputProvinsi.value
      )
    };

    const inputNama = document.getElementById('nama');
    const inputTanggalLahir = document.getElementById('tanggalLahir');
    const inputNoHP = document.getElementById('noHP');
    const form = document.querySelector('form#daftar');
    const queryParam = new URLSearchParams(window.location.search);
    const newEmail = queryParam.get('email') ? queryParam.get('email') : "Vernandputra14@gmail.com";
    const newEmailPlaceholder = document.querySelector('span#new-email-placeholder');
    newEmailPlaceholder.outerHTML = newEmail;

    form.addEventListener('submit', function (event) {
      event.preventDefault();

      const alamat = getAlamatFromInput();

      if (inputNama.value && alamat && inputNoHP.value && inputTanggalLahir.value) {
        signin(new Account(
          inputNama.value,
          newEmail,
          inputNoHP.value,
          new Date(inputTanggalLahir.value),
          alamat));
      }
    });
  </script>
</body>

</html>